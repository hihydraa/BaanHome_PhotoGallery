<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡∏™‡πÑ‡∏•‡∏î‡πå‡πÇ‡∏ä‡∏ß‡πå‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ï‡∏Å‡∏≤‡∏£‡∏Å‡∏∏‡∏®‡∏•</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Sarabun", "Segoe UI", sans-serif;
    }

    body {
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      background: radial-gradient(circle at top, #7f1d1d 0%, #450a0a 40%, #111827 100%);
      color: #fff;
      display: flex;
      flex-direction: column;
    }

    /* ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏±‡∏Å */
    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 16px;
      gap: 16px;
    }

    .slide-wrapper {
      position: relative;
      width: min(90vw, 1400px);
      height: min(65vh, 650px);
      display: flex;
      justify-content: center;
      align-items: center;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 24px;
      backdrop-filter: blur(4px);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6);
      padding: 12px;
    }

    #slideshow-img {
      max-width: 100%;
      max-height: 100%;
      border-radius: 18px;
      object-fit: contain;
      background: rgba(255, 255, 255, 0.1);
    }

    .caption {
      margin-top: 8px;
      padding: 8px 18px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.95);
      color: #b91c1c;
      font-weight: 700;
      font-size: clamp(14px, 2vw, 18px);
      text-align: center;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.35);
      max-width: 90vw;
    }

    /* footer ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô frame ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
    .footer-frame {
      height: 110px; /* ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ */
      width: 100%;
      background: url("footer-frame.png") no-repeat center center;
      background-size: cover;
      flex-shrink: 0;
    }

    .loading {
      opacity: 0.8;
      font-size: 14px;
      margin-top: 6px;
    }

    @media (max-width: 768px) {
      .slide-wrapper {
        height: 55vh;
      }
    }
  </style>
</head>
<body>
  <div class="main">
    <div class="slide-wrapper">
      <img id="slideshow-img" src="" alt="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û..." />
    </div>

    <div class="caption">
      ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ï‡∏Å‡∏≤‡∏£‡∏Å‡∏∏‡∏®‡∏• ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏¢‡∏≤‡∏á‡∏ï‡∏•‡∏≤‡∏î @‡∏™‡∏ß‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£ ‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏Æ‡∏° ‡∏£‡∏µ‡∏™‡∏≠‡∏£‡πå‡∏ó &amp; ‡∏û‡∏π‡∏•‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤
    </div>

    <div id="status" class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å Google Drive...</div>
  </div>

  <!-- ‡πÄ‡∏ü‡∏£‡∏° footer ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á -->
  <div class="footer-frame"></div>

 <script>
  // ========= ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà =========
  const FOLDER_ID = "1iGzvVcRr2pMefz_ASm71LhndR912OdjV"; // ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå Google Drive
  const API_KEY   = "YOUR_API_KEY_HERE";                  // <- API Key ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
  const CHANGE_INTERVAL_MS = 5000;                        // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥
  // ================================

  const imgEl    = document.getElementById("slideshow-img");
  const statusEl = document.getElementById("status");

  // ‡∏£‡∏π‡∏õ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÅ‡∏ö‡∏ö manual (‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á)
  const fallbackImageUrls = [
    "https://drive.google.com/uc?export=view&id=1JxN6zxM7jtCxSH-EqXZJc9m944eAqEgB"
    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏≠‡∏∑‡πà‡∏ô‡∏Å‡πá‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡πà‡∏≠‡∏ó‡πâ‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
  ];

  let imageUrls  = [];  // ‡∏£‡∏π‡∏õ‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏à‡∏≤‡∏Å Drive API
  let lastIndex  = -1;
  let slideTimer = null;

  // ‡∏ñ‡πâ‡∏≤‡∏£‡∏π‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏à‡∏∞ log src ‡πÉ‡∏´‡πâ‡∏î‡∏π
  imgEl.addEventListener("error", () => {
    console.error("‚ùå ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", imgEl.src);
  });

  function showRandomImage() {
    const list = imageUrls.length ? imageUrls : fallbackImageUrls;
    if (!list.length) return;

    let idx;
    do {
      idx = Math.floor(Math.random() * list.length);
    } while (list.length > 1 && idx === lastIndex);

    lastIndex = idx;
    const url = list[idx];
    console.log("üëâ ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ:", url);
    imgEl.src = url;
  }

  async function loadImagesFromDrive() {
    try {
      const q   = `'${FOLDER_ID}' in parents and mimeType contains 'image/' and trashed = false`;
      const url = `https://www.googleapis.com/drive/v3/files` +
                  `?q=${encodeURIComponent(q)}` +
                  `&fields=files(id,name)` +
                  `&key=${API_KEY}`;

      console.log("üì° ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Drive API:", url);

      const res = await fetch(url);
      if (!res.ok) {
        throw new Error("HTTP " + res.status);
      }

      const data = await res.json();
      console.log("üì¶ data ‡∏à‡∏≤‡∏Å Drive API:", data);

      if (!data.files || !data.files.length) {
        console.warn("‚ö† ‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå ‡πÉ‡∏ä‡πâ fallback ‡πÅ‡∏ó‡∏ô");
        statusEl.textContent = "‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏£‡∏π‡∏õ‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå ‡πÉ‡∏ä‡πâ‡∏ä‡∏∏‡∏î‡∏£‡∏π‡∏õ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•";
        imageUrls = [];  // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ fallback
      } else {
        imageUrls = data.files.map(f => `https://drive.google.com/uc?export=view&id=${f.id}`);
        console.log("‚úÖ imageUrls ‡∏à‡∏≤‡∏Å Drive:", imageUrls);
        statusEl.textContent = `‡∏û‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ${imageUrls.length} ‡∏£‡∏π‡∏õ ‚Ä¢ ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏ö‡∏ö‡∏™‡∏∏‡πà‡∏°‡∏ó‡∏∏‡∏Å 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
      }

    } catch (err) {
      console.error("üî• Error ‡∏ï‡∏≠‡∏ô‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å Drive:", err);
      statusEl.textContent = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏≤‡∏Å Drive ‚Ä¢ ‡πÉ‡∏ä‡πâ‡∏ä‡∏∏‡∏î‡∏£‡∏π‡∏õ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÅ‡∏ó‡∏ô";
      imageUrls = []; // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ fallback
    }

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡πÑ‡∏•‡∏î‡πå (‡πÉ‡∏ä‡πâ imageUrls ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ, ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏à‡∏∞ fallback ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
    showRandomImage();
    if (slideTimer) clearInterval(slideTimer);
    slideTimer = setInterval(showRandomImage, CHANGE_INTERVAL_MS);
  }

  window.addEventListener("load", () => {
    console.log("üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å Drive...");
    loadImagesFromDrive();
  });
</script>

</body>
</html>
